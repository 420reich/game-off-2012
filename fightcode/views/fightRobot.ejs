<% include header.ejs %>
<div class="fight-arena">

    <div class="loading">
        <div class="left-half">
            <div class="my-robot">
                <div class="robotData">
                    <img src="/img/bender.png" class="robot-image"></img>
                    <h2><span class="ranking">#20</span><span class="name">MANIAC</span></h2>
                    <div class="victories"><span class="number">12</span><span class="stat-label">VICTORIES</span></div>
                    <div class="defeats"><span class="number">8</span><span class="stat-label">DEFEATS</span></div>
                    <div class="draws"><span class="number">2</span><span class="stat-label">DRAWS</span></div>
                </div>
            </div>
        </div>
        <div class="vs">VS</div>
        <div class="right-half">
            <div class="opponent-robot">
                <div class="robotData">
                    <h2><span class="ranking">#39</span><span class="name">IRONMAIDEN</span></h2>
                    <div class="victories"><span class="number">20</span><span class="stat-label">VICTORIES</span></div>
                    <div class="defeats"><span class="number">18</span><span class="stat-label">DEFEATS</span></div>
                    <div class="draws"><span class="number">5</span><span class="stat-label">DRAWS</span></div>
                    <img src="/img/rosie.png" class="robot-image"></img>
                </div>
            </div>
        </div>
    </div>

    <div class="board">
    </div>
</div>

<% include scripts.ejs %>

<% revisions.forEach(function(robot_revision_fight) { %>
<script type="robot/script" id="<%= robot_revision_fight.name %>-code">
    <%= robot_revision_fight.code %>
</script>
<% }); %>

<script>
    container = $(".fight-arena");

    var robot1Code = $('#<%= revisions[0].name %>-code').html();
    var robot2Code = $('#<%= revisions[1].name %>-code').html();

    arena = new FightArena(container, [
        {
            name: "<%= revisions[0].name %>",
            code: robot1Code,
            rectangle: {
                position: {
                    x: <%= revisions[0].position_x %>,
                    y: <%= revisions[0].position_y %>
                },
                angle: <%= revisions[0].angle %>
            }
        },
        {
            name: "<%= revisions[1].name %>",
            code: robot2Code,
            rectangle: {
                position: {
                    x: <%= revisions[1].position_x %>,
                    y: <%= revisions[1].position_y %>
                },
                angle: <%= revisions[1].angle %>
            }
        }
    ])
</script>
<% include footer.ejs %>
