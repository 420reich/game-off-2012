/*! FightCode - v0.1.0
* http://fightcodega.me/
*/
var selectFighter,top10,__bind=function(e,t){return function(){return e.apply(t,arguments)}};top10=function(){function e(e){this.elements=e,this.fighterSelected=!1,this.bindEvents()}return e.prototype.bindEvents=function(){var e=this;return this.elements.on("hover",function(t){return e.elements.removeClass("open"),$(t.currentTarget).addClass("open")})},e}(),selectFighter=function(){function e(e){this.elements=e,this.onClick=__bind(this.onClick,this),this.bindEvents()}return e.prototype.bindEvents=function(){return this.elements.on("click",this.onClick)},e.prototype.preventDoubleClick=function(e){var t=this;return $(".choose-area .start-fight").on("click",function(e){return t.fighterSelected&&e.preventDefault(),t.fighterSelected=!0})},e.prototype.onClick=function(e){var t,n;return n=this,e.preventDefault(),t=$(e.currentTarget).attr("href"),$.ajax(t).done(function(e){var t;return t=$.modal(e,{overlayClose:!0,opacity:75}),n.preventDoubleClick(t)})},e}(),new top10($(".top10 li")),new selectFighter($(".actions .fight")),$("#robo-code-form").submit(function(e){var t;t=$(this).find("[name=title]");if(t.val()==="")return t.addClass("error"),e.preventDefault(),!1});var FightArena,__bind=function(e,t){return function(){return e.apply(t,arguments)}};FightArena=function(){function e(e,t,n,r){this.container=e,this.robots=t,this.onRound=n,this.options=r,this.receiveWorkerEvent=__bind(this.receiveWorkerEvent,this),this.options=$.extend({maxRounds:1e4,onEndGame:function(e){},boardSize:{width:800,height:500}},this.options),this.terminated=!1,this.worker=null,this.game=null,this.startWorker()}return e.prototype.stop=function(){return this.terminated=!0,this.worker.terminate(),this.game&&this.game.forceEnd()},e.prototype.setRobots=function(e){return this.robots=e},e.prototype.startWorker=function(){var e;return this.worker||(this.worker=new Worker("/output/fightcode.worker.min.js"),this.worker.onmessage=this.receiveWorkerEvent),e={robots:this.robots.length,robot1:this.robots[0],robot2:this.robots[1],streaming:this.options.streaming,maxRounds:this.options.maxRounds,boardSize:{width:this.options.boardSize.width,height:this.options.boardSize.height}},this.options.streaming&&this.startGame(),this.worker.postMessage(e)},e.prototype.startGame=function(e){var t,n;if(this.game){this.game.end();return}return t=this.container.find(".board"),t.empty(),n=$("<div></div>"),t.append(n),this.game=new Game(n,e,{msPerRound:5,onRound:this.onRound,onEndGame:this.options.onEndGame}),this.game.start()},e.prototype.receiveWorkerEvent=function(e){var t;if(this.terminated)return;t=e.data,t.type==="log"&&console.log("LOG",t.message),t.type==="stream"&&this.game.addRound(t.roundLog);if(t.type==="results")return this.startGame(t)},e}(),function(){var e=$(".menu-container"),t=$(".ribbon-container"),n=e.find(".ribbon");n.on("click",function(t){t.preventDefault(),e.toggleClass("open")}),n.on("hover",function(){t.trigger("hover")})}(),function(){var e,t;return e=location.pathname,t=$(".menu-container"),t.find(".checked").removeClass("checked"),t.find("a[href='"+e+"'], a[data-navbar-href='"+e+"']").addClass("checked")}();var UserChart,__bind=function(e,t){return function(){return e.apply(t,arguments)}};$(function(){return $(".dial").knob()}),UserChart=function(){function e(e,t,n,r,i,s){this.element=e,this.data=t,this.width=n,this.height=r,this.bgcolor=i,this.colors=s!=null?s:["#ed0027"],this.draw=__bind(this.draw,this),google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(this.draw)}return e.prototype.draw=function(){var e,t;return e=google.visualization.arrayToDataTable(this.data),t={curveType:"function",width:this.width,height:this.height,lineWidth:7,enableInteractivity:!1,chartArea:{left:0,top:0,width:"100%",height:"100%"},backgroundColor:this.bgcolor,colors:this.colors,fontSize:0,vAxis:{baselineColor:this.bgcolor,gridlines:{color:this.bgcolor},textStyle:{color:this.bgcolor}},hAxis:{baselineColor:this.bgcolor,gridlines:{color:this.bgcolor},textStyle:{color:this.bgcolor}}},(new google.visualization.LineChart(this.element)).draw(e,t)},e}(),$(".user-chart").each(function(){var e,t;return t=$(this).attr("data-chart-values"),t=t.replace(/[']/gi,'"'),t=t.replace(/^\s*/gi,"").replace(/\s*$/gi,""),e=JSON.parse(t),new UserChart(this,e,252,103,"#f7f7f7")});